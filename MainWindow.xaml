<Window x:Class="glaive.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gungnir - Home" Height="600" Width="1100"
        ResizeMode="NoResize" WindowStartupLocation="CenterScreen"
        Background="Black">
    <Window.Resources>
        <!-- Sidebar Button Style with Hover Effect -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                    Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#333333"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="IconButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                    Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#333333"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Expander Header Style (for our custom header layout) -->
        <Style x:Key="ExpanderHeaderStyle" TargetType="ToggleButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}"
                    Padding="10">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#333333"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Custom Expander Style to remove the default arrow -->
        <Style x:Key="CustomExpanderStyle" TargetType="Expander">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Expander">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <StackPanel>
                                <!-- Use our custom header style. -->
                                <ToggleButton x:Name="HeaderSite" 
                              Focusable="False"
                              IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                              Content="{TemplateBinding Header}"
                              Style="{StaticResource ExpanderHeaderStyle}"/>
                                <ContentPresenter x:Name="ExpandSite" Visibility="Collapsed" ContentSource="Content"/>
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="True">
                                <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Style for the dropdown arrow so it rotates when expanded -->
        <Style x:Key="ExpanderArrowStyle" TargetType="TextBlock">
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <RotateTransform Angle="0"/>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsExpanded, RelativeSource={RelativeSource AncestorType=Expander}}" Value="True">
                    <Setter Property="RenderTransform">
                        <Setter.Value>
                            <RotateTransform Angle="180"/>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Define two rows: top bar and main content -->
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Bar -->
        <DockPanel Grid.Row="0" Background="#010100" LastChildFill="True">
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="236*"/>
                    <ColumnDefinition Width="189*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="425*"/>
                </Grid.ColumnDefinitions>
                <!-- Title and Directory Path -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,10,0" Grid.Column="0" Grid.ColumnSpan="2">
                    <TextBlock Text="📂" FontSize="20" Foreground="White"/>
                    <TextBlock Text=" Gungnir" FontSize="16" Foreground="White" FontWeight="Bold" Margin="10,0,0,0"/>
                    <TextBlock x:Name="DirectoryText" Text=" | /Home" FontSize="14" Foreground="Gray" Margin="10,0,0,0"/>
                </StackPanel>
                <!-- Centered Search Box -->
                <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="2">
                    <TextBox Width="250" Height="30" Name="SearchBox" VerticalContentAlignment="Center"
                   Foreground="White" Background="Black" BorderBrush="White" BorderThickness="1"
                   GotFocus="SearchBox_GotFocus" LostFocus="SearchBox_LostFocus">
                        <TextBox.Template>
                            <ControlTemplate TargetType="TextBox">
                                <Border Background="{TemplateBinding Background}" 
                        BorderBrush="{TemplateBinding BorderBrush}" 
                        BorderThickness="{TemplateBinding BorderThickness}" 
                        Padding="5">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <Path Data="M 12 2 C 5 2 0 7 0 14 C 0 21 5 26 12 26 C 19 26 24 21 24 14 C 24 7 19 2 12 2 Z" 
                          Fill="White" HorizontalAlignment="Left" VerticalAlignment="Center" 
                          Width="20" Height="20"/>
                                        <ScrollViewer x:Name="PART_ContentHost" HorizontalAlignment="Stretch" 
                                    VerticalAlignment="Stretch" Background="Transparent"/>
                                    </StackPanel>
                                </Border>
                            </ControlTemplate>
                        </TextBox.Template>
                    </TextBox>
                </Grid>
            </Grid>
        </DockPanel>

        <!-- Main Content Row -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <!-- Side Menu Column -->
                <ColumnDefinition Width="180"/>
                <!-- Main Content Column -->
                <ColumnDefinition Width="*"/>
                <!-- Right Profile Panel Column -->
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>

            <!-- Side Menu (Permanently Expanded) -->
            <Border x:Name="SideMenu" Background="#010100" Grid.Column="0"
              VerticalAlignment="Stretch" HorizontalAlignment="Left" Panel.ZIndex="1" >
                <!-- Using a Grid to place menu items and a bottom profile section -->
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <!-- Navigation Buttons -->
                    <StackPanel Grid.Row="0">
                        <!-- Dashboard Button -->
                        <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateHome_Click">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="☰" FontSize="20" Margin="0,0,10,0" Foreground="White"/>
                                <TextBlock x:Name="HomeText" Text="Dashboard" VerticalAlignment="Center" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- Add Button as Expander -->
                        <Expander x:Name="AddExpander" ExpandDirection="Down" IsExpanded="False" Style="{StaticResource CustomExpanderStyle}">
                            <Expander.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="➕" FontSize="20" Margin="0,0,10,0" Grid.Column="0" Foreground="White"/>
                                    <TextBlock x:Name="AddText" Text="Add" VerticalAlignment="Center" Grid.Column="1" Foreground="White"/>
                                    <!-- Custom dropdown arrow on the right -->
                                    <TextBlock x:Name="AddArrow" Text="▼" FontSize="12" VerticalAlignment="Center" Grid.Column="2" Margin="10,0,0,0" Style="{StaticResource ExpanderArrowStyle}" Foreground="White"/>
                                </Grid>
                            </Expander.Header>
                            <StackPanel Background="#020202">
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateAddOption1_Click">
                                    <TextBlock Text="Add College" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateAddOption2_Click">
                                    <TextBlock Text="Add Program" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateAddOption3_Click">
                                    <TextBlock Text="Add Student" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                            </StackPanel>
                        </Expander>

                        <!-- View Button as Expander -->
                        <Expander x:Name="ViewExpander" ExpandDirection="Down" IsExpanded="False" Style="{StaticResource CustomExpanderStyle}">
                            <Expander.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="📄" FontSize="20" Margin="0,0,10,0" Grid.Column="0" Foreground="White"/>
                                    <TextBlock x:Name="ViewText" Text="View" VerticalAlignment="Center" Grid.Column="1" Foreground="White"/>
                                    <!-- Custom dropdown arrow on the right -->
                                    <TextBlock x:Name="ViewArrow" Text="▼" FontSize="12" VerticalAlignment="Center" Grid.Column="2" Margin="10,0,0,0" Style="{StaticResource ExpanderArrowStyle}" Foreground="White"/>
                                </Grid>
                            </Expander.Header>
                            <StackPanel Background="#020202">
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateViewOption1_Click">
                                    <TextBlock Text="View College List" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateViewOption2_Click">
                                    <TextBlock Text="View Program List" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                                <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateViewOption3_Click">
                                    <TextBlock Text="View Student List" Margin="30,0,0,0" Foreground="White"/>
                                </Button>
                            </StackPanel>
                        </Expander>

                        <!-- History Button -->
                        <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateHistory_Click">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="📜" FontSize="20" Margin="0,0,10,0" Foreground="White"/>
                                <TextBlock x:Name="HistoryText" Text="History" VerticalAlignment="Center" Foreground="White"/>
                            </StackPanel>
                        </Button>

                        <!-- About Button -->
                        <Button Style="{StaticResource SidebarButtonStyle}" Click="NavigateAbout_Click">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="ℹ️" FontSize="20" Margin="0,0,10,0" Foreground="White"/>
                                <TextBlock x:Name="AboutText" Text="About" VerticalAlignment="Center" Foreground="White"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <!-- Bottom Profile Section in Side Menu -->
                    <Border Grid.Row="1" Background="#020202" Padding="10">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom">
                            <!-- Optionally add a profile image/icon here -->
                            <Ellipse Width="30" Height="30" Fill="Gray"/>
                            <TextBlock x:Name="SideProfileName" Text="Logged in as: [User]" Foreground="White" Margin="10,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Main Content Column -->
            <Grid Grid.Column="1" Background="#EEF3F5">
                <!-- Centered main content -->
                <ContentControl Name="MainContent" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="20" Foreground="Black"/>
            </Grid>
            

            <!-- Right Profile Panel Column -->
            <Border Grid.Column="2" Background="#010100" Padding="10" >
                <StackPanel>
                    <!-- Top Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                        <Button Style="{StaticResource IconButtonStyle}" ToolTip="YouTube">
                            <TextBlock Text="▶" Foreground="White"/>
                        </Button>
                        <Button Style="{StaticResource IconButtonStyle}" ToolTip="GitHub">
                            <TextBlock Text="🐱" Foreground="White"/>
                        </Button>
                        <Button Style="{StaticResource IconButtonStyle}" ToolTip="LinkedIn">
                            <TextBlock Text="in" Foreground="White"/>
                        </Button>
                        <Button Style="{StaticResource IconButtonStyle}" ToolTip="Settings">
                            <TextBlock Text="⚙" Foreground="White"/>
                        </Button>
                    </StackPanel>
                    <!-- Large Profile Display -->
                    <Border BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0,0,0,10">
                        <StackPanel HorizontalAlignment="Center">
                            <Ellipse Width="80" Height="80" Fill="Gray"/>
                            <TextBlock x:Name="ProfileName" Foreground="White" Text="User Name" FontSize="18" FontWeight="Bold" Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>
                    <!-- Real-Time Updates Box -->
                    <Border BorderBrush="Gray" BorderThickness="1" Height="200" Padding="10">
                        <TextBlock Text="Real-time updates will appear here..." Foreground="White" TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
