<UserControl x:Class="glaive.HistoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:glaive"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
	<Grid>
		<Border HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Width="600"
                CornerRadius="15"
                Padding="0,10,0,15">

			<Grid Margin="20">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<!-- Top Panel -->
				<StackPanel Orientation="Horizontal" Grid.Row="0">
					<ComboBox x:Name="SortComboBox"
                             Width="235"
                             Margin="0,10"
                             Style="{StaticResource SortComboBoxStyle}"
                             SelectionChanged="SortComboBox_SelectionChanged">
						<ComboBoxItem Content="Date and Time (Newest First)"/>
						<ComboBoxItem Content="Date and Time (Oldest First)"/>
						<ComboBoxItem Content="Alphabetical User"/>
						<ComboBoxItem Content="Alphabetical Action"/>
					</ComboBox>
				</StackPanel>

				<!-- ListView -->
				<ListView x:Name="HistoryListView"
                         Grid.Row="1"
                         Margin="0,10"
                         SelectionMode="Multiple"
                         Style="{StaticResource CustomListViewStyle}">
					<ListView.View>
						<GridView>
							<GridViewColumn Header="Date and Time" Width="150">
								<GridViewColumn.HeaderContainerStyle>
									<Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource HeaderStyle}"/>
								</GridViewColumn.HeaderContainerStyle>
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Timestamp, StringFormat='{}{0:MM/dd/yyyy HH:mm:ss}'}"
                                                 Style="{StaticResource TableCellStyle}"
                                                 Width="{Binding Width, RelativeSource={RelativeSource AncestorType=GridViewColumn}}"/>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>

							<GridViewColumn Header="User" Width="100">
								<GridViewColumn.HeaderContainerStyle>
									<Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource HeaderStyle}"/>
								</GridViewColumn.HeaderContainerStyle>
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding User}"
                                                 Style="{StaticResource TableCellStyle}"
                                                 Width="{Binding Width, RelativeSource={RelativeSource AncestorType=GridViewColumn}}"/>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>

							<GridViewColumn Header="Action" Width="150">
								<GridViewColumn.HeaderContainerStyle>
									<Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource HeaderStyle}"/>
								</GridViewColumn.HeaderContainerStyle>
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Action}"
                                                 Style="{StaticResource TableCellStyle}"
                                                 Width="{Binding Width, RelativeSource={RelativeSource AncestorType=GridViewColumn}}"/>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>

							<GridViewColumn Header="Details" Width="200">
								<GridViewColumn.HeaderContainerStyle>
									<Style TargetType="GridViewColumnHeader" BasedOn="{StaticResource HeaderStyle}"/>
								</GridViewColumn.HeaderContainerStyle>
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock Text="{Binding Details}"
                                                 Style="{StaticResource TableCellStyle}"
                                                 TextWrapping="Wrap"
                                                 Width="{Binding Width, RelativeSource={RelativeSource AncestorType=GridViewColumn}}"/>
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>
						</GridView>
					</ListView.View>
				</ListView>

				<!-- Bottom Panel -->
				<Grid Grid.Row="2" Margin="0,10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<!-- Left-aligned buttons -->
					<StackPanel Orientation="Horizontal" Grid.Column="0" HorizontalAlignment="Left">
						<Button x:Name="UpdateHistoryButton"
								Content="Update History"
								Click="UpdateHistoryButton_Click"
								Margin="5"
                                Style="{StaticResource ClearButtonStyle}"/>
					</StackPanel>
				</Grid>
			</Grid>
		</Border>
	</Grid>
</UserControl>